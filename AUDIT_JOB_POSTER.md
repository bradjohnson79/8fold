## Job Poster Dashboard API Inventory (apps/web → apps/api)

This maps **Job Poster** UI actions to:
- **Web app route** (`apps/web`) that calls the API
- **Web proxy API route** (`apps/web/src/app/api/app/**`) that forwards to backend
- **Backend API route** (`apps/api/app/api/web/**`)
- **Primary tables touched** (best-effort from backend route imports/usage)

### High-risk notes discovered during inventory

- **Silent failure in web proxy**: `apps/web/src/app/api/app/job-poster/jobs/route.ts` returns `200 { ok:true, jobs: [] }` on upstream failure (swallows real errors). This can hide DB/schema problems and create “phantom empty dashboard”.
- **Legacy API origin port mismatch** (historical): a web proxy defaulted to `http://localhost:3002` while most other proxies used `3003`.
- **Account endpoints missing web proxies**: UI calls `/api/app/account/suspend` and `/api/app/account/delete`, but there are **no** matching proxy routes under `apps/web/src/app/api/app/account/**` yet.

---

### Inventory table

| UI action | Frontend file(s) | Web endpoint | Web proxy route file | Upstream backend endpoint | Backend route file | Tables touched |
|---|---|---|---|---|---|---|
| Load dashboard (jobs + materials) | `apps/web/src/app/app/job-poster/page.tsx` | `GET /api/app/job-poster/jobs` + `GET /api/app/job-poster/materials/pending` | `apps/web/src/app/api/app/job-poster/jobs/route.ts` + `apps/web/src/app/api/app/job-poster/materials/pending/route.ts` | `GET /api/web/job-poster/jobs` + `GET /api/web/job-poster/materials/pending` | `apps/api/app/api/web/job-poster/jobs/route.ts` + `apps/api/app/api/web/job-poster/materials/pending/route.ts` | `Job`, `JobPayment`, `JobAssignment`, `RepeatContractorRequest`, `contractor_accounts`/materials tables (pending) |
| My Jobs list | `apps/web/src/app/app/job-poster/jobs/page.tsx` | `GET /api/app/job-poster/jobs` | `apps/web/src/app/api/app/job-poster/jobs/route.ts` | `GET /api/web/job-poster/jobs` | `apps/api/app/api/web/job-poster/jobs/route.ts` | `Job`, `JobPayment`, `JobAssignment`, `Contractor`, `RepeatContractorRequest` |
| Delete draft | `apps/web/src/app/app/job-poster/jobs/page.tsx`, `apps/web/src/app/app/job-poster/page.tsx` | `DELETE /api/app/job-poster/drafts/:jobId` | `apps/web/src/app/api/app/job-poster/drafts/[jobId]/route.ts` | `DELETE /api/web/job-poster/drafts/:jobId` | `apps/api/app/api/web/job-poster/drafts/[id]/route.ts` | `Job`, `JobPhoto`, audit tables (varies) |
| Load profile | `apps/web/src/app/app/job-poster/profile/page.tsx`, layout gate | `GET /api/app/job-poster/profile` | `apps/web/src/app/api/app/job-poster/profile/route.ts` | `GET /api/web/job-poster/profile` | `apps/api/app/api/web/job-poster/profile/route.ts` | `JobPosterProfile` |
| Save profile (upsert) | `apps/web/src/app/app/job-poster/profile/page.tsx` | `POST /api/app/job-poster/profile` | `apps/web/src/app/api/app/job-poster/profile/route.ts` | `POST /api/web/job-poster/profile` | `apps/api/app/api/web/job-poster/profile/route.ts` | `JobPosterProfile` |
| Post a job wizard (draft save / step flow) | `apps/web/src/app/app/job-poster/post-a-job/page.tsx` | multiple `/api/app/job-poster/**` | multiple `apps/web/src/app/api/app/job-poster/**/route.ts` | multiple `/api/web/job-poster/**` | multiple `apps/api/app/api/web/job-poster/**/route.ts` | `Job`, `JobPhoto`, `JobPayment`, `AuditLog`, repeat tables |
| Draft autosave | `apps/web/src/app/app/job-poster/post-a-job/page.tsx` | `POST /api/app/job-poster/drafts/save` | `apps/web/src/app/api/app/job-poster/drafts/save/route.ts` | `POST /api/web/job-poster/drafts/save` | `apps/api/app/api/web/job-poster/drafts/save/route.ts` | `Job`, `JobPhoto` |
| Create draft | `apps/web/src/app/app/job-poster/post-a-job/page.tsx` | `POST /api/app/job-poster/jobs/create-draft` | `apps/web/src/app/api/app/job-poster/jobs/create-draft/route.ts` | `POST /api/web/job-poster/jobs/create-draft` | `apps/api/app/api/web/job-poster/jobs/create-draft/route.ts` | `Job`, `JobPosterProfile`, `JobPhoto`, `AuditLog` |
| Start appraisal | `apps/web/src/app/app/job-poster/post-a-job/page.tsx` | `POST /api/app/job-poster/drafts/:jobId/start-appraisal` | `apps/web/src/app/api/app/job-poster/drafts/[jobId]/start-appraisal/route.ts` | `POST /api/web/job-poster/drafts/:id/start-appraisal` | `apps/api/app/api/web/job-poster/drafts/[id]/start-appraisal/route.ts` | `Job` (AI appraisal fields), `AuditLog` |
| Wizard step persistence | `apps/web/src/app/app/job-poster/post-a-job/page.tsx` | `POST /api/app/job-poster/drafts/:jobId/wizard-step` | `apps/web/src/app/api/app/job-poster/drafts/[jobId]/wizard-step/route.ts` | `POST /api/web/job-poster/drafts/:id/wizard-step` | `apps/api/app/api/web/job-poster/drafts/[id]/wizard-step/route.ts` | `Job` |
| Create payment intent | `apps/web/src/app/app/job-poster/post-a-job/page.tsx` | `POST /api/app/job-poster/jobs/:jobId/create-payment-intent` | `apps/web/src/app/api/app/job-poster/jobs/[jobId]/create-payment-intent/route.ts` | `POST /api/web/job-poster/jobs/:id/create-payment-intent` | `apps/api/app/api/web/job-poster/jobs/[id]/create-payment-intent/route.ts` | `Job`, `JobPayment` |
| Confirm payment / publish | `apps/web/src/app/app/job-poster/post-a-job/page.tsx` | `POST /api/app/job-poster/jobs/:jobId/confirm-payment` | `apps/web/src/app/api/app/job-poster/jobs/[jobId]/confirm-payment/route.ts` | `POST /api/web/job-poster/jobs/:id/confirm-payment` | `apps/api/app/api/web/job-poster/jobs/[id]/confirm-payment/route.ts` | `Job`, `JobPayment`, `RepeatContractorRequest`, `JobAssignment`, `AuditLog` |
| Payment status | `apps/web/src/app/app/job-poster/post-a-job/page.tsx` | `GET /api/app/job-poster/jobs/:jobId/payment-status` | `apps/web/src/app/api/app/job-poster/jobs/[jobId]/payment-status/route.ts` | `GET /api/web/job-poster/jobs/:id/payment-status` | `apps/api/app/api/web/job-poster/jobs/[id]/payment-status/route.ts` | `Job`, `JobPayment` |
| Resume pricing | `apps/web/src/app/app/job-poster/post-a-job/page.tsx` | `GET /api/app/job-poster/jobs/:jobId/resume-pricing` | `apps/web/src/app/api/app/job-poster/jobs/[jobId]/resume-pricing/route.ts` | `GET /api/web/job-poster/jobs/:id/resume-pricing` | `apps/api/app/api/web/job-poster/jobs/[id]/resume-pricing/route.ts` | `Job` (pricing fields) |
| Repeat contractor eligibility/status/request/cancel | `apps/web/src/app/app/job-poster/post-a-job/page.tsx` | `/api/app/job-poster/repeat-contractor/*` | `apps/web/src/app/api/app/job-poster/repeat-contractor/*/route.ts` | `/api/web/job-poster/repeat-contractor/*` | `apps/api/app/api/web/job-poster/repeat-contractor/*/route.ts` | `RepeatContractorRequest`, `Job` |
| Conversations list | `apps/web/src/app/app/job-poster/layout.tsx` (via shell), pages | `GET /api/app/job-poster/conversations` | `apps/web/src/app/api/app/job-poster/conversations/route.ts` | `GET /api/web/job-poster/conversations` | `apps/api/app/api/web/job-poster/conversations/route.ts` | `conversations`, `messages` |
| Conversation messages | UI message thread | `GET/POST /api/app/job-poster/conversations/:id/messages` | `apps/web/src/app/api/app/job-poster/conversations/[conversationId]/messages/route.ts` | `GET/POST /api/web/job-poster/conversations/:id/messages` | `apps/api/app/api/web/job-poster/conversations/[id]/messages/route.ts` | `messages`, `conversations` |
| Notifications | job-poster shell | `GET /api/app/job-poster/notifications` + mark-read | `apps/web/src/app/api/app/job-poster/notifications/*/route.ts` | `/api/web/job-poster/notifications*` | `apps/api/app/api/web/job-poster/notifications/*/route.ts` | `notification_deliveries` |
| Check-ins | dashboard + cards | `GET /api/app/job-poster/checkins` + respond | `apps/web/src/app/api/app/job-poster/checkins/*/route.ts` | `/api/web/job-poster/checkins*` | `apps/api/app/api/web/job-poster/checkins*` | `Job` (ECD fields), `AuditLog` |
| Contractor responses | dashboard card | `GET /api/app/job-poster/contractor-responses` | `apps/web/src/app/api/app/job-poster/contractor-responses/route.ts` | `GET /api/web/job-poster/contractor-responses` | `apps/api/app/api/web/job-poster/contractor-responses/route.ts` | `JobDispatch`, `JobAssignment`, `Job` |
| Support tickets list/create | support pages | `GET/POST /api/app/support/tickets` | `apps/web/src/app/api/app/support/tickets/route.ts` | `GET/POST /api/web/support/tickets` | `apps/api/app/api/web/support/tickets/route.ts` | `support_tickets`, `support_messages`, `support_attachments`, `dispute_cases` |
| Support ticket messages | support pages | `POST /api/app/support/tickets/:id/messages` | `apps/web/src/app/api/app/support/tickets/[ticketId]/messages/route.ts` | `POST /api/web/support/tickets/:id/messages` | `apps/api/app/api/web/support/tickets/[id]/messages/route.ts` | `support_messages` |
| Support disputes create | support pages | `POST /api/app/support/disputes` | `apps/web/src/app/api/app/support/disputes/route.ts` | `POST /api/web/support/disputes` | `apps/api/app/api/web/support/disputes/route.ts` | `dispute_cases`, `support_tickets` |
| Account suspend/delete | `apps/web/src/app/app/job-poster/profile/page.tsx` | `POST /api/app/account/suspend` + `/api/app/account/delete` | **MISSING** | `POST /api/web/account/suspend` + `/api/web/account/delete` | `apps/api/app/api/web/account/suspend/route.ts` + `apps/api/app/api/web/account/delete/route.ts` | `User`, `Job` |

